@prefix td: <https://www.w3.org/2019/wot/td#> .
@prefix htv: <http://www.w3.org/2011/http#> .
@prefix hctl: <https://www.w3.org/2019/wot/hypermedia#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix wotsec: <https://www.w3.org/2019/wot/security#> .
@prefix js: <https://www.w3.org/2019/wot/json-schema#> .
@prefix cashmere: <https://aimas.cs.pub.ro/ont/cashmere#> .
@prefix ex: <http://example.org/> .


ex:huelampdemo a td:Thing, cashmere:ContextAuthorizedResource, ex:HueLamp ;
    td:title "Hue Lamp with Shared Context Authorization" ;
    td:hasSecurityConfiguration [ a wotsec:NoSecurityScheme ] ;
    td:hasBase <http://example.org/huelampdemo> ;
    td:hasPropertyAffordance [
        a td:PropertyAffordance;
        td:name "state" ;
        td:hasForm [
            htv:methodName "GET" ;
            hctl:hasTarget <http://example.org/huelampdemo/state> ;
            hctl:forContentType "application/json";
            hctl:hasOperationType td:readProperty ;
        ] ;
    ] ;
    td:hasPropertyAffordance [
        a td:PropertyAffordance;
        td:name "color" ;
        td:hasForm [
            htv:methodName "GET" ;
            hctl:hasTarget <http://example.org/huelampdemo/color> ;
            hctl:forContentType "application/json";
            hctl:hasOperationType td:readProperty ;
        ] ;
    ] ;
    td:hasActionAffordance [
        a td:ActionAffordance ;
        td:name "state" ;
        td:hasForm [
            htv:methodName "PUT" ;
            hctl:hasTarget <http://example.org/huelampdemo/state> ;
            hctl:forContentType "application/json";
            hctl:hasOperationType td:invokeAction;
        ] ;
        td:hasInputSchema [
            a js:ObjectSchema ;
            js:properties [
                a js:StringSchema ;
                js:propertyName "state";
                js:oneOf ([js:const "on"]  [js:const "off"]);
            ] ;
            js:required "state" ;
        ] ;
    ] ;
    td:hasActionAffordance [
        a td:ActionAffordance ;
        td:name "color" ;
        td:hasForm [
            htv:methodName "PUT" ;
            hctl:hasTarget <http://example.org/huelampdemo/color> ;
            hctl:forContentType "application/json";
            hctl:hasOperationType td:invokeAction;
        ] ;
        td:hasInputSchema [
            a js:ObjectSchema ;
            js:properties [
                a js:StringSchema ;
                js:propertyName "color";
                js:oneOf ([js:const "red"]  [js:const "green"]  [js:const "blue"]);
            ] ;
            js:required "color" ;
        ] ;
    ] ;
    # Shared Context Authorization
    cashmere:hasAccessAuthorization [
        a cashmere:SharedContextAccessAuthorization ;
        cashmere:enablesAccessType acl:Read, acl:Write ;
        cashmere:requiresMembershipIn ex:Lab308ContextDomainGroup ;
    ] .
    
